<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premier Properties - Real Estate Listings</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f8f9fa;
            line-height: 1.6;
        }
        
        .header {
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 2rem;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: #2c3e50;
        }
        
        .nav-menu {
            display: flex;
            list-style: none;
            gap: 2rem;
        }
        
        .nav-menu a {
            text-decoration: none;
            color: #555;
            font-weight: 500;
            transition: color 0.3s ease;
        }
        
        .nav-menu a:hover {
            color: #3498db;
        }
        
        .hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 4rem 0;
            text-align: center;
        }
        
        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        
        .hero p {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }
        
        .listings-section {
            padding: 4rem 0;
        }
        
        .section-title {
            text-align: center;
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 3rem;
        }
        
        .listings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        
        .property-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        
        .property-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(0,0,0,0.15);
        }
        
        .property-thumbnail {
            width: 100%;
            height: 250px;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .property-card:hover .property-thumbnail {
            transform: scale(1.05);
        }
        
        .property-info {
            padding: 1.5rem;
        }
        
        .property-price {
            font-size: 1.8rem;
            font-weight: 700;
            color: #27ae60;
            margin-bottom: 0.5rem;
        }
        
        .property-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 0.5rem;
        }
        
        .property-location {
            color: #7f8c8d;
            margin-bottom: 1rem;
            font-size: 0.95rem;
        }
        
        .property-features {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .feature {
            display: flex;
            align-items: center;
            gap: 0.3rem;
            color: #555;
            font-size: 0.9rem;
        }
        
        .property-description {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .debug-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 280px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.15);
            padding: 15px;
            z-index: 10000;
            max-height: 70vh;
            overflow-y: auto;
            font-size: 0.85rem;
        }
        
        .debug-panel h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1rem;
        }
        
        .debug-log {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.75rem;
            max-height: 150px;
            overflow-y: auto;
            margin-bottom: 10px;
        }
        
        .debug-controls button {
            background: #667eea;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            margin: 3px 3px 3px 0;
            font-size: 0.8rem;
        }
        
        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 6px;
        }
        
        .status-success { background: #28a745; }
        .status-error { background: #dc3545; }
        .status-warning { background: #ffc107; }
        .status-info { background: #17a2b8; }
        
        /* Property Detail Modal Styles */
        .property-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .property-modal.active {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: white;
            border-radius: 16px;
            width: 95%;
            max-width: 1100px;
            max-height: 90vh;
            overflow-y: auto;
            transition: transform 0.3s ease;
        }
        
        .property-modal.active .modal-content {
            transform: translate(-50%, -50%) scale(1);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 2rem;
            border-bottom: 1px solid #eee;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            color: #999;
            padding: 0;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-close:hover {
            background: #f5f5f5;
            color: #333;
        }
        
        .modal-body {
            padding: 2rem;
        }
        
        .property-gallery {
            margin-bottom: 2rem;
        }
        
        .main-image {
            width: 100%;
            height: 400px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 1rem;
            cursor: pointer;
        }
        
        .thumbnail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 0.5rem;
        }
        
        .thumbnail {
            width: 100%;
            height: 80px;
            object-fit: cover;
            border-radius: 4px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: border-color 0.2s ease;
        }
        
        .thumbnail:hover {
            border-color: #3498db;
        }
        
        .thumbnail.active {
            border-color: #667eea;
        }
        
        .property-details {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
        }
        
        .detail-section h3 {
            color: #2c3e50;
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }
        
        .detail-section p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 1rem;
        }
        
        .features-list {
            list-style: none;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0.5rem;
        }
        
        .features-list li {
            padding: 0.5rem 0;
            color: #555;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .features-list li:before {
            content: "‚úì";
            color: #27ae60;
            font-weight: bold;
        }
        
        @media (max-width: 768px) {
            .property-details {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                width: 98%;
                margin: 1%;
            }
            
            .modal-body {
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="nav-container">
            <div class="logo">üè† Premier Properties</div>
            <nav>
                <ul class="nav-menu">
                    <li><a href="#listings">Listings</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="hero">
        <div class="container">
            <h1>Find Your Dream Home</h1>
            <p>Discover premium properties with our AI-powered image enhancement technology</p>
        </div>
    </section>

    <section class="listings-section" id="listings">
        <div class="container">
            <h2 class="section-title">Featured Properties</h2>
            
            <div class="listings-grid">
                <!-- Property 1 -->
                <div class="property-card" onclick="openPropertyModal('property1')">
                    <img src="https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=400&h=250&fit=crop" 
                         alt="Modern family home exterior" 
                         class="property-thumbnail">
                    <div class="property-info">
                        <div class="property-price">$750,000</div>
                        <div class="property-title">Modern Family Home</div>
                        <div class="property-location">üìç Maple Street, Suburbia</div>
                        <div class="property-features">
                            <div class="feature">üõèÔ∏è 4 beds</div>
                            <div class="feature">üöø 3 baths</div>
                            <div class="feature">üìê 2,400 sq ft</div>
                        </div>
                        <div class="property-description">
                            Beautiful modern home with open floor plan, updated kitchen, and spacious backyard perfect for families.
                        </div>
                    </div>
                </div>

                <!-- Property 2 -->
                <div class="property-card" onclick="openPropertyModal('property2')">
                    <img src="https://images.unsplash.com/photo-1570129477492-45c003edd2be?w=400&h=250&fit=crop" 
                         alt="Luxury downtown condo interior" 
                         class="property-thumbnail">
                    <div class="property-info">
                        <div class="property-price">$1,200,000</div>
                        <div class="property-title">Luxury Downtown Condo</div>
                        <div class="property-location">üìç City Center, Downtown</div>
                        <div class="property-features">
                            <div class="feature">üõèÔ∏è 3 beds</div>
                            <div class="feature">üöø 2 baths</div>
                            <div class="feature">üìê 1,800 sq ft</div>
                        </div>
                        <div class="property-description">
                            Stunning high-rise condo with panoramic city views, premium finishes, and building amenities.
                        </div>
                    </div>
                </div>

                <!-- Property 3 -->
                <div class="property-card" onclick="openPropertyModal('property3')">
                    <img src="https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=400&h=250&fit=crop" 
                         alt="Charming suburban home kitchen" 
                         class="property-thumbnail">
                    <div class="property-info">
                        <div class="property-price">$525,000</div>
                        <div class="property-title">Charming Suburban Home</div>
                        <div class="property-location">üìç Oak Avenue, Riverside</div>
                        <div class="property-features">
                            <div class="feature">üõèÔ∏è 3 beds</div>
                            <div class="feature">üöø 2 baths</div>
                            <div class="feature">üìê 1,600 sq ft</div>
                        </div>
                        <div class="property-description">
                            Cozy home with updated kitchen, hardwood floors, and quiet neighborhood setting.
                        </div>
                    </div>
                </div>

                <!-- Property 4 -->
                <div class="property-card" onclick="openPropertyModal('property4')">
                    <img src="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=400&h=250&fit=crop" 
                         alt="Contemporary villa living room" 
                         class="property-thumbnail">
                    <div class="property-info">
                        <div class="property-price">$950,000</div>
                        <div class="property-title">Contemporary Villa</div>
                        <div class="property-location">üìç Hillside Drive, Westside</div>
                        <div class="property-features">
                            <div class="feature">üõèÔ∏è 5 beds</div>
                            <div class="feature">üöø 4 baths</div>
                            <div class="feature">üìê 3,200 sq ft</div>
                        </div>
                        <div class="property-description">
                            Elegant villa with designer interiors, pool, and breathtaking mountain views.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Debug Panel -->
    <div class="debug-panel">
        <h3>üîß DinoOverlay Debug</h3>
        
        <div class="debug-controls">
            <button onclick="testAPI()">Test API</button>
            <button onclick="clearLogs()">Clear</button>
        </div>
        
        <div>
            <h4>Status:</h4>
            <div id="status-display">
                <span class="status-indicator status-info"></span>
                <span>Ready</span>
            </div>
        </div>
        
        <div>
            <h4>Log:</h4>
            <div id="debug-log" class="debug-log">
                System initialized...
            </div>
        </div>
        
        <div>
            <h4>Detection:</h4>
            <div id="detection-info">Thumbnails: Disabled<br>Large Images: Active</div>
        </div>
    </div>  
  <!-- Property Detail Modals -->
    
    <!-- Property 1 Modal -->
    <div id="property1-modal" class="property-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Modern Family Home - $750,000</h2>
                <button class="modal-close" onclick="closePropertyModal('property1')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="property-gallery">
                    <img id="property1-main" 
                         src="https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800&h=500&fit=crop" 
                         alt="Modern family home exterior - main view" 
                         class="main-image real-estate-large">
                    
                    <div class="thumbnail-grid">
                        <img src="https://images.unsplash.com/photo-1564013799919-ab600027ffc6?w=800&h=500&fit=crop" 
                             alt="Modern family home exterior" 
                             class="thumbnail active real-estate-large"
                             onclick="changeMainImage('property1', this.src, this)">
                        <img src="https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=800&h=500&fit=crop" 
                             alt="Modern home living room interior" 
                             class="thumbnail real-estate-large"
                             onclick="changeMainImage('property1', this.src, this)">
                        <img src="https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=800&h=500&fit=crop" 
                             alt="Modern kitchen with island" 
                             class="thumbnail real-estate-large"
                             onclick="changeMainImage('property1', this.src, this)">
                        <img src="https://images.unsplash.com/photo-1571508601891-ca5e7a713859?w=800&h=500&fit=crop" 
                             alt="Master bedroom suite" 
                             class="thumbnail real-estate-large"
                             onclick="changeMainImage('property1', this.src, this)">
                        <img src="https://images.unsplash.com/photo-1552321554-5fefe8c9ef14?w=800&h=500&fit=crop" 
                             alt="Modern bathroom with bathtub" 
                             class="thumbnail real-estate-large"
                             onclick="changeMainImage('property1', this.src, this)">
                        <img src="https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=800&h=500&fit=crop" 
                             alt="Backyard and patio area" 
                             class="thumbnail real-estate-large"
                             onclick="changeMainImage('property1', this.src, this)">
                    </div>
                </div>
                
                <div class="property-details">
                    <div class="detail-section">
                        <h3>Property Description</h3>
                        <p>This stunning modern family home offers the perfect blend of contemporary design and comfortable living. Located in the desirable Maple Street neighborhood, this 4-bedroom, 3-bathroom home features an open floor plan that seamlessly connects the living, dining, and kitchen areas.</p>
                        
                        <p>The gourmet kitchen boasts stainless steel appliances, granite countertops, and a large island perfect for entertaining. The master suite includes a walk-in closet and spa-like bathroom with dual vanities and a soaking tub.</p>
                        
                        <h3>Key Features</h3>
                        <ul class="features-list">
                            <li>Open floor plan design</li>
                            <li>Gourmet kitchen with island</li>
                            <li>Master suite with walk-in closet</li>
                            <li>Hardwood floors throughout</li>
                            <li>Two-car attached garage</li>
                            <li>Landscaped backyard</li>
                            <li>Energy-efficient appliances</li>
                            <li>Central air conditioning</li>
                        </ul>
                    </div>
                    
                    <div class="detail-section">
                        <h3>Property Details</h3>
                        <p><strong>Price:</strong> $750,000</p>
                        <p><strong>Bedrooms:</strong> 4</p>
                        <p><strong>Bathrooms:</strong> 3</p>
                        <p><strong>Square Feet:</strong> 2,400</p>
                        <p><strong>Lot Size:</strong> 0.25 acres</p>
                        <p><strong>Year Built:</strong> 2018</p>
                        <p><strong>Property Type:</strong> Single Family</p>
                        <p><strong>Parking:</strong> 2-car garage</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Property 2 Modal -->
    <div id="property2-modal" class="property-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Luxury Downtown Condo - $1,200,000</h2>
                <button class="modal-close" onclick="closePropertyModal('property2')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="property-gallery">
                    <img id="property2-main" 
                         src="https://images.unsplash.com/photo-1570129477492-45c003edd2be?w=800&h=500&fit=crop" 
                         alt="Luxury condo living room with city view" 
                         class="main-image real-estate-large">
                    
                    <div class="thumbnail-grid">
                        <img src="https://images.unsplash.com/photo-1570129477492-45c003edd2be?w=800&h=500&fit=crop" 
                             alt="Luxury condo living room" 
                             class="thumbnail active real-estate-large"
                             onclick="changeMainImage('property2', this.src, this)">
                        <img src="https://images.unsplash.com/photo-1560448204-61dc36dc98c8?w=800&h=500&fit=crop" 
                             alt="Modern condo kitchen" 
                             class="thumbnail real-estate-large"
                             onclick="changeMainImage('property2', this.src, this)">
                        <img src="https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=800&h=500&fit=crop" 
                             alt="Condo master bedroom" 
                             class="thumbnail real-estate-large"
                             onclick="changeMainImage('property2', this.src, this)">
                        <img src="https://images.unsplash.com/photo-1584622650111-993a426fbf0a?w=800&h=500&fit=crop" 
                             alt="Luxury bathroom with marble" 
                             class="thumbnail real-estate-large"
                             onclick="changeMainImage('property2', this.src, this)">
                        <img src="https://images.unsplash.com/photo-1545324418-cc1a3fa10c00?w=800&h=500&fit=crop" 
                             alt="City skyline view from balcony" 
                             class="thumbnail real-estate-large"
                             onclick="changeMainImage('property2', this.src, this)">
                    </div>
                </div>
                
                <div class="property-details">
                    <div class="detail-section">
                        <h3>Property Description</h3>
                        <p>Experience luxury living in this stunning downtown high-rise condominium. This sophisticated 3-bedroom, 2-bathroom unit offers breathtaking panoramic city views and premium finishes throughout.</p>
                        
                        <p>The open-concept living space features floor-to-ceiling windows, hardwood floors, and a gourmet kitchen with top-of-the-line appliances. Building amenities include a fitness center, rooftop terrace, and 24-hour concierge service.</p>
                        
                        <h3>Building Amenities</h3>
                        <ul class="features-list">
                            <li>24-hour concierge service</li>
                            <li>Fitness center and spa</li>
                            <li>Rooftop terrace with city views</li>
                            <li>Indoor parking garage</li>
                            <li>Business center</li>
                            <li>Pet-friendly building</li>
                        </ul>
                    </div>
                    
                    <div class="detail-section">
                        <h3>Property Details</h3>
                        <p><strong>Price:</strong> $1,200,000</p>
                        <p><strong>Bedrooms:</strong> 3</p>
                        <p><strong>Bathrooms:</strong> 2</p>
                        <p><strong>Square Feet:</strong> 1,800</p>
                        <p><strong>Floor:</strong> 25th</p>
                        <p><strong>Year Built:</strong> 2020</p>
                        <p><strong>Property Type:</strong> Condominium</p>
                        <p><strong>HOA Fee:</strong> $850/month</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Property 3 Modal -->
    <div id="property3-modal" class="property-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Charming Suburban Home - $525,000</h2>
                <button class="modal-close" onclick="closePropertyModal('property3')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="property-gallery">
                    <img id="property3-main" 
                         src="https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=800&h=500&fit=crop" 
                         alt="Charming home kitchen with breakfast nook" 
                         class="main-image real-estate-large">
                    
                    <div class="thumbnail-grid">
                        <img src="https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=800&h=500&fit=crop" 
                             alt="Cozy kitchen with breakfast nook" 
                             class="thumbnail active real-estate-large"
                             onclick="changeMainImage('property3', this.src, this)">
                        <img src="https://images.unsplash.com/photo-1505693416388-ac5ce068fe85?w=800&h=500&fit=crop" 
                             alt="Suburban home exterior" 
                             class="thumbnail real-estate-large"
                             onclick="changeMainImage('property3', this.src, this)">
                        <img src="https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=800&h=500&fit=crop" 
                             alt="Comfortable living room" 
                             class="thumbnail real-estate-large"
                             onclick="changeMainImage('property3', this.src, this)">
                        <img src="https://images.unsplash.com/photo-1571508601891-ca5e7a713859?w=800&h=500&fit=crop" 
                             alt="Cozy bedroom" 
                             class="thumbnail real-estate-large"
                             onclick="changeMainImage('property3', this.src, this)">
                        <img src="https://images.unsplash.com/photo-1600607687644-c7171b42498b?w=800&h=500&fit=crop" 
                             alt="Backyard garden area" 
                             class="thumbnail real-estate-large"
                             onclick="changeMainImage('property3', this.src, this)">
                    </div>
                </div>
                
                <div class="property-details">
                    <div class="detail-section">
                        <h3>Property Description</h3>
                        <p>Discover the charm of suburban living in this delightful 3-bedroom, 2-bathroom home. Located on quiet Oak Avenue, this property offers a perfect blend of comfort and convenience for growing families.</p>
                        
                        <p>The heart of the home is the updated kitchen featuring granite countertops, stainless steel appliances, and a cozy breakfast nook. Beautiful hardwood floors flow throughout the main living areas, creating warmth and elegance.</p>
                        
                        <h3>Neighborhood Features</h3>
                        <ul class="features-list">
                            <li>Quiet residential street</li>
                            <li>Top-rated school district</li>
                            <li>Walking distance to parks</li>
                            <li>Close to shopping centers</li>
                            <li>Family-friendly community</li>
                            <li>Public transportation access</li>
                        </ul>
                    </div>
                    
                    <div class="detail-section">
                        <h3>Property Details</h3>
                        <p><strong>Price:</strong> $525,000</p>
                        <p><strong>Bedrooms:</strong> 3</p>
                        <p><strong>Bathrooms:</strong> 2</p>
                        <p><strong>Square Feet:</strong> 1,600</p>
                        <p><strong>Lot Size:</strong> 0.18 acres</p>
                        <p><strong>Year Built:</strong> 1995</p>
                        <p><strong>Property Type:</strong> Single Family</p>
                        <p><strong>Parking:</strong> Driveway + Street</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Property 4 Modal -->
    <div id="property4-modal" class="property-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Contemporary Villa - $950,000</h2>
                <button class="modal-close" onclick="closePropertyModal('property4')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="property-gallery">
                    <img id="property4-main" 
                         src="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=800&h=500&fit=crop" 
                         alt="Contemporary villa living room with mountain view" 
                         class="main-image real-estate-large">
                    
                    <div class="thumbnail-grid">
                        <img src="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=800&h=500&fit=crop" 
                             alt="Elegant living room with mountain view" 
                             class="thumbnail active real-estate-large"
                             onclick="changeMainImage('property4', this.src, this)">
                        <img src="https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=800&h=500&fit=crop" 
                             alt="Villa exterior with pool" 
                             class="thumbnail real-estate-large"
                             onclick="changeMainImage('property4', this.src, this)">
                        <img src="https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=800&h=500&fit=crop" 
                             alt="Gourmet kitchen with island" 
                             class="thumbnail real-estate-large"
                             onclick="changeMainImage('property4', this.src, this)">
                        <img src="https://images.unsplash.com/photo-1571508601891-ca5e7a713859?w=800&h=500&fit=crop" 
                             alt="Luxurious master suite" 
                             class="thumbnail real-estate-large"
                             onclick="changeMainImage('property4', this.src, this)">
                        <img src="https://images.unsplash.com/photo-1584622650111-993a426fbf0a?w=800&h=500&fit=crop" 
                             alt="Spa-like master bathroom" 
                             class="thumbnail real-estate-large"
                             onclick="changeMainImage('property4', this.src, this)">
                        <img src="https://images.unsplash.com/photo-1600607687920-4e2a09cf159d?w=800&h=500&fit=crop" 
                             alt="Pool and outdoor entertainment area" 
                             class="thumbnail real-estate-large"
                             onclick="changeMainImage('property4', this.src, this)">
                    </div>
                </div>
                
                <div class="property-details">
                    <div class="detail-section">
                        <h3>Property Description</h3>
                        <p>Indulge in luxury living at this magnificent contemporary villa nestled in the prestigious Hillside Drive community. This architectural masterpiece offers 5 bedrooms, 4 bathrooms, and breathtaking mountain views from every room.</p>
                        
                        <p>The villa features soaring ceilings, floor-to-ceiling windows, and premium finishes throughout. The resort-style backyard includes a sparkling pool, spa, and outdoor kitchen perfect for entertaining guests year-round.</p>
                        
                        <h3>Luxury Features</h3>
                        <ul class="features-list">
                            <li>Designer interior finishes</li>
                            <li>Smart home automation</li>
                            <li>Wine cellar and tasting room</li>
                            <li>Home theater system</li>
                            <li>Three-car garage</li>
                            <li>Pool and spa</li>
                            <li>Outdoor kitchen</li>
                            <li>Mountain and valley views</li>
                        </ul>
                    </div>
                    
                    <div class="detail-section">
                        <h3>Property Details</h3>
                        <p><strong>Price:</strong> $950,000</p>
                        <p><strong>Bedrooms:</strong> 5</p>
                        <p><strong>Bathrooms:</strong> 4</p>
                        <p><strong>Square Feet:</strong> 3,200</p>
                        <p><strong>Lot Size:</strong> 0.5 acres</p>
                        <p><strong>Year Built:</strong> 2019</p>
                        <p><strong>Property Type:</strong> Single Family Villa</p>
                        <p><strong>Parking:</strong> 3-car garage</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript for Property Modals and DinoOverlay Integration -->
    <script>
        // Debug logging system
        const debugLog = document.getElementById('debug-log');
        const statusDisplay = document.getElementById('status-display');
        const detectionInfo = document.getElementById('detection-info');
        
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = `[${timestamp}] ${message}\n`;
            debugLog.textContent += logEntry;
            debugLog.scrollTop = debugLog.scrollHeight;
            
            // Update status indicator
            const indicator = statusDisplay.querySelector('.status-indicator');
            const statusText = statusDisplay.querySelector('span:last-child');
            
            indicator.className = `status-indicator status-${type}`;
            statusText.textContent = message;
            
            console.log(`DinoOverlay: ${message}`);
        }
        
        function clearLogs() {
            debugLog.textContent = '';
            log('Debug log cleared');
        }
        
        async function testAPI() {
            log('Testing API connection...', 'info');
            try {
                const response = await fetch('https://dino-overlay-system.vercel.app/api/overlay/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        message: 'Test connection',
                        imageUrl: 'test'
                    })
                });
                
                if (response.ok) {
                    log('‚úÖ API connection successful', 'success');
                } else {
                    log(`‚ùå API error: ${response.status}`, 'error');
                }
            } catch (error) {
                log(`‚ùå API connection failed: ${error.message}`, 'error');
            }
        }
        
        // Property Modal Functions
        function openPropertyModal(propertyId) {
            log(`üìÇ Opening property details: ${propertyId}`);
            const modal = document.getElementById(`${propertyId}-modal`);
            modal.classList.add('active');
            
            // Initialize DinoOverlay for large images in this modal
            setTimeout(() => {
                initializeModalOverlay(propertyId);
            }, 300);
        }
        
        function closePropertyModal(propertyId) {
            log(`üìÇ Closing property details: ${propertyId}`);
            const modal = document.getElementById(`${propertyId}-modal`);
            modal.classList.remove('active');
        }
        
        function changeMainImage(propertyId, newSrc, thumbnailElement) {
            const mainImage = document.getElementById(`${propertyId}-main`);
            mainImage.src = newSrc;
            
            // Update active thumbnail
            const thumbnails = document.querySelectorAll(`#${propertyId}-modal .thumbnail`);
            thumbnails.forEach(thumb => thumb.classList.remove('active'));
            thumbnailElement.classList.add('active');
            
            log(`üñºÔ∏è Changed main image for ${propertyId}`);
        }
        
        // DinoOverlay Configuration
        const CONFIG = {
            apiBaseUrl: 'https://dino-overlay-system.vercel.app/api/overlay',
            detectionKeywords: [
                'house', 'home', 'property', 'real estate', 'kitchen', 'bedroom', 
                'living room', 'bathroom', 'interior', 'exterior', 'apartment', 
                'condo', 'villa', 'mansion', 'cottage', 'cabin'
            ],
            minImageSize: { width: 400, height: 300 } // Only activate on larger images
        };
        
        let overlayManager = null;
        
        // DinoOverlay Manager Class
        class DinoOverlayManager {
            constructor() {
                this.activeOverlay = null;
                this.isProcessing = false;
            }
            
            initializeForModal(modalId) {
                log(`üîç Scanning for large images in ${modalId} modal`);
                
                const modal = document.getElementById(`${modalId}-modal`);
                const largeImages = modal.querySelectorAll('.real-estate-large');
                let detectedCount = 0;
                
                largeImages.forEach((img, index) => {
                    if (this.isLargeRealEstateImage(img)) {
                        detectedCount++;
                        
                        // Add visual indicator for DinoOverlay
                        img.style.border = '3px solid #667eea';
                        img.style.borderRadius = '8px';
                        img.title = 'ü¶ï DinoOverlay: Click to edit this image';
                        img.style.cursor = 'pointer';
                        
                        // Add click handler for overlay
                        img.addEventListener('click', (e) => {
                            e.stopPropagation(); // Prevent modal close or image change
                            this.showOverlay({
                                element: img,
                                id: `${modalId}-img-${index}`,
                                src: img.src,
                                alt: img.alt || ''
                            });
                        });
                    }
                });
                
                log(`‚úÖ Detected ${detectedCount} large real estate images in ${modalId}`, 'success');
                detectionInfo.innerHTML = `Thumbnails: Disabled<br>Large Images: ${detectedCount} detected`;
            }
            
            isLargeRealEstateImage(img) {
                // Check if image is large enough (main images and thumbnails in detail view)
                if (img.naturalWidth < CONFIG.minImageSize.width || 
                    img.naturalHeight < CONFIG.minImageSize.height) {
                    return false;
                }
                
                // Check if it has the real-estate-large class
                if (!img.classList.contains('real-estate-large')) {
                    return false;
                }
                
                // Check alt text and context for real estate keywords
                const altText = (img.alt || '').toLowerCase();
                const className = (img.className || '').toLowerCase();
                const parentText = img.parentElement ? 
                    img.parentElement.textContent.toLowerCase() : '';
                
                const searchText = `${altText} ${className} ${parentText}`;
                
                return CONFIG.detectionKeywords.some(keyword => 
                    searchText.includes(keyword)
                );
            }
            
            async showOverlay(imageData) {
                if (this.isProcessing) return;
                
                log(`üé® Opening DinoOverlay for: ${imageData.alt || 'Untitled'}`);
                
                // Add white border highlight to the image
                imageData.element.style.border = '4px solid white';
                imageData.element.style.boxShadow = '0 0 20px rgba(255, 255, 255, 0.8), 0 0 40px rgba(102, 126, 234, 0.3)';
                imageData.element.style.borderRadius = '12px';
                
                // Create overlay elements
                this.createOverlayElements(imageData);
                this.activeImageElement = imageData.element;
            }
            
            createOverlayElements(imageData) {
                // Add DinoOverlay styles if not already added
                if (!document.getElementById('dino-overlay-styles')) {
                    this.addOverlayStyles();
                }
                
                // Create button group (Edit, Replace, Style)
                this.createButtonGroup(imageData);
                
                // Create chat input
                this.createChatInput(imageData);
                
                // Create quick actions sidebar
                this.createQuickActionsSidebar(imageData);
                
                // Create close button
                this.createCloseButton();
            }
            
            createButtonGroup(imageData) {
                const buttonGroup = document.createElement('div');
                buttonGroup.className = 'dino-button-group';
                buttonGroup.innerHTML = `
                    <button class="dino-main-btn dino-edit-btn" onclick="dinoOverlay.setMode('edit')">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
                        </svg>
                        Edit
                    </button>
                    <button class="dino-main-btn dino-replace-btn" onclick="dinoOverlay.setMode('replace')">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2v9.67z"/>
                        </svg>
                        Replace
                    </button>
                    <button class="dino-main-btn dino-style-btn" onclick="dinoOverlay.setMode('style')">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
                        </svg>
                        Style
                    </button>
                `;
                
                // Position button group above the image
                const rect = imageData.element.getBoundingClientRect();
                buttonGroup.style.position = 'fixed';
                buttonGroup.style.top = (rect.top - 60) + 'px';
                buttonGroup.style.left = (rect.left + (rect.width / 2) - 150) + 'px';
                buttonGroup.style.zIndex = '10001';
                
                document.body.appendChild(buttonGroup);
                this.buttonGroup = buttonGroup;
            }
            
            createChatInput(imageData) {
                const chatInput = document.createElement('div');
                chatInput.className = 'dino-chat-input';
                chatInput.innerHTML = `
                    <div class="dino-chat-container">
                        <input type="text" placeholder="Ask AI about room design..." class="dino-chat-field" id="dino-chat-field">
                        <button class="dino-send-btn" onclick="dinoOverlay.sendChatMessage()">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                            </svg>
                        </button>
                    </div>
                `;
                
                // Position chat input below the image
                const rect = imageData.element.getBoundingClientRect();
                chatInput.style.position = 'fixed';
                chatInput.style.top = (rect.bottom + 20) + 'px';
                chatInput.style.left = (rect.left + (rect.width / 2) - 200) + 'px';
                chatInput.style.zIndex = '10001';
                
                document.body.appendChild(chatInput);
                this.chatInput = chatInput;
            }
            
            createQuickActionsSidebar(imageData) {
                const sidebar = document.createElement('div');
                sidebar.className = 'dino-quick-actions-sidebar';
                sidebar.innerHTML = `
                    <div class="dino-sidebar-header">
                        <h3>Quick Actions</h3>
                        <button class="dino-sidebar-close" onclick="dinoOverlay.closeQuickActions()">√ó</button>
                    </div>
                    <div class="dino-sidebar-content">
                        <div class="dino-style-options">
                            <button class="dino-style-option" onclick="dinoOverlay.applyStyle('scandi')">
                                <div class="dino-style-icon">üè†</div>
                                <span>Scandi Style</span>
                            </button>
                            <button class="dino-style-option" onclick="dinoOverlay.applyStyle('minimalist')">
                                <div class="dino-style-icon">‚ú®</div>
                                <span>Minimalist</span>
                            </button>
                            <button class="dino-style-option" onclick="dinoOverlay.applyStyle('sofa')">
                                <div class="dino-style-icon">üõãÔ∏è</div>
                                <span>Add Sofa</span>
                            </button>
                            <button class="dino-style-option" onclick="dinoOverlay.applyStyle('modern')">
                                <div class="dino-style-icon">üè¢</div>
                                <span>Modern</span>
                            </button>
                            <button class="dino-style-option" onclick="dinoOverlay.applyStyle('cozy')">
                                <div class="dino-style-icon">üïØÔ∏è</div>
                                <span>Cozy</span>
                            </button>
                            <button class="dino-style-option" onclick="dinoOverlay.applyStyle('luxury')">
                                <div class="dino-style-icon">üíé</div>
                                <span>Luxury</span>
                            </button>
                        </div>
                        
                        <div class="dino-ai-suggestions">
                            <h4>AI Suggestions</h4>
                            <p>Based on this room, we recommend adding warm lighting and modern furniture to enhance the space.</p>
                        </div>
                    </div>
                `;
                
                // Position sidebar to the right of the image
                const rect = imageData.element.getBoundingClientRect();
                sidebar.style.position = 'fixed';
                sidebar.style.top = rect.top + 'px';
                sidebar.style.left = (rect.right + 20) + 'px';
                sidebar.style.zIndex = '10001';
                sidebar.style.display = 'none'; // Initially hidden
                
                document.body.appendChild(sidebar);
                this.quickActionsSidebar = sidebar;
            }
            
            createCloseButton() {
                const closeBtn = document.createElement('button');
                closeBtn.className = 'dino-overlay-close';
                closeBtn.innerHTML = '√ó';
                closeBtn.onclick = () => this.closeOverlay();
                
                closeBtn.style.position = 'fixed';
                closeBtn.style.top = '20px';
                closeBtn.style.right = '20px';
                closeBtn.style.zIndex = '10002';
                
                document.body.appendChild(closeBtn);
                this.closeButton = closeBtn;
            }
            
            addOverlayStyles() {
                const styles = document.createElement('style');
                styles.id = 'dino-overlay-styles';
                styles.textContent = `
                    /* Button Group Styles */
                    .dino-button-group {
                        display: flex;
                        gap: 8px;
                        background: rgba(255, 255, 255, 0.95);
                        backdrop-filter: blur(10px);
                        border-radius: 12px;
                        padding: 8px;
                        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
                        border: 1px solid rgba(255, 255, 255, 0.2);
                    }
                    
                    .dino-main-btn {
                        display: flex;
                        align-items: center;
                        gap: 8px;
                        padding: 12px 20px;
                        background: white;
                        border: 1px solid #e5e7eb;
                        border-radius: 8px;
                        cursor: pointer;
                        font-size: 14px;
                        font-weight: 500;
                        color: #374151;
                        transition: all 0.2s ease;
                        min-width: 90px;
                        justify-content: center;
                    }
                    
                    .dino-main-btn:hover {
                        background: #f9fafb;
                        border-color: #d1d5db;
                        transform: translateY(-1px);
                    }
                    
                    .dino-main-btn.active {
                        background: #667eea;
                        color: white;
                        border-color: #667eea;
                    }
                    
                    .dino-main-btn svg {
                        width: 16px;
                        height: 16px;
                    }
                    
                    /* Chat Input Styles */
                    .dino-chat-input {
                        background: rgba(255, 255, 255, 0.95);
                        backdrop-filter: blur(10px);
                        border-radius: 25px;
                        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
                        border: 1px solid rgba(255, 255, 255, 0.2);
                        overflow: hidden;
                    }
                    
                    .dino-chat-container {
                        display: flex;
                        align-items: center;
                        padding: 4px;
                    }
                    
                    .dino-chat-field {
                        flex: 1;
                        border: none;
                        outline: none;
                        padding: 12px 20px;
                        font-size: 14px;
                        background: transparent;
                        color: #374151;
                        width: 360px;
                    }
                    
                    .dino-chat-field::placeholder {
                        color: #9ca3af;
                    }
                    
                    .dino-send-btn {
                        background: #667eea;
                        border: none;
                        border-radius: 50%;
                        width: 40px;
                        height: 40px;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        cursor: pointer;
                        color: white;
                        transition: all 0.2s ease;
                        margin-right: 4px;
                    }
                    
                    .dino-send-btn:hover {
                        background: #5a6fd8;
                        transform: scale(1.05);
                    }
                    
                    /* Quick Actions Sidebar */
                    .dino-quick-actions-sidebar {
                        background: rgba(255, 255, 255, 0.95);
                        backdrop-filter: blur(10px);
                        border-radius: 16px;
                        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
                        border: 1px solid rgba(255, 255, 255, 0.2);
                        width: 280px;
                        max-height: 500px;
                        overflow: hidden;
                    }
                    
                    .dino-sidebar-header {
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        padding: 20px;
                        border-bottom: 1px solid #f3f4f6;
                        background: white;
                    }
                    
                    .dino-sidebar-header h3 {
                        margin: 0;
                        font-size: 18px;
                        font-weight: 600;
                        color: #111827;
                    }
                    
                    .dino-sidebar-close {
                        background: none;
                        border: none;
                        font-size: 24px;
                        cursor: pointer;
                        color: #9ca3af;
                        padding: 0;
                        width: 32px;
                        height: 32px;
                        border-radius: 50%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        transition: all 0.2s ease;
                    }
                    
                    .dino-sidebar-close:hover {
                        background: #f3f4f6;
                        color: #374151;
                    }
                    
                    .dino-sidebar-content {
                        padding: 20px;
                        max-height: 400px;
                        overflow-y: auto;
                    }
                    
                    .dino-style-options {
                        display: grid;
                        grid-template-columns: 1fr 1fr;
                        gap: 12px;
                        margin-bottom: 24px;
                    }
                    
                    .dino-style-option {
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        gap: 8px;
                        padding: 16px 12px;
                        background: white;
                        border: 2px solid #f3f4f6;
                        border-radius: 12px;
                        cursor: pointer;
                        transition: all 0.2s ease;
                        text-align: center;
                    }
                    
                    .dino-style-option:hover {
                        border-color: #667eea;
                        background: #f8faff;
                        transform: translateY(-2px);
                    }
                    
                    .dino-style-icon {
                        font-size: 24px;
                        margin-bottom: 4px;
                    }
                    
                    .dino-style-option span {
                        font-size: 12px;
                        font-weight: 500;
                        color: #374151;
                    }
                    
                    .dino-ai-suggestions {
                        background: #f8faff;
                        border: 1px solid #e0e7ff;
                        border-radius: 12px;
                        padding: 16px;
                    }
                    
                    .dino-ai-suggestions h4 {
                        margin: 0 0 8px 0;
                        font-size: 14px;
                        font-weight: 600;
                        color: #374151;
                    }
                    
                    .dino-ai-suggestions p {
                        margin: 0;
                        font-size: 12px;
                        color: #6b7280;
                        line-height: 1.4;
                    }
                    
                    /* Close Button */
                    .dino-overlay-close {
                        background: rgba(0, 0, 0, 0.5);
                        border: none;
                        color: white;
                        font-size: 24px;
                        cursor: pointer;
                        padding: 0;
                        width: 40px;
                        height: 40px;
                        border-radius: 50%;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        transition: all 0.2s ease;
                        backdrop-filter: blur(10px);
                    }
                    
                    .dino-overlay-close:hover {
                        background: rgba(0, 0, 0, 0.7);
                        transform: scale(1.1);
                    }
                    
                    /* Processing Status */
                    .dino-processing-status {
                        position: fixed;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        background: rgba(255, 255, 255, 0.95);
                        backdrop-filter: blur(10px);
                        border-radius: 16px;
                        padding: 24px 32px;
                        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
                        border: 1px solid rgba(255, 255, 255, 0.2);
                        display: flex;
                        align-items: center;
                        gap: 16px;
                        z-index: 10003;
                    }
                    
                    .dino-spinner {
                        width: 24px;
                        height: 24px;
                        border: 3px solid #f3f4f6;
                        border-top: 3px solid #667eea;
                        border-radius: 50%;
                        animation: dino-spin 1s linear infinite;
                    }
                    
                    @keyframes dino-spin {
                        0% { transform: rotate(0deg); }
                        100% { transform: rotate(360deg); }
                    }
                    
                    /* Responsive Design */
                    @media (max-width: 768px) {
                        .dino-button-group {
                            flex-direction: column;
                            width: 200px;
                        }
                        
                        .dino-chat-input {
                            width: 300px;
                        }
                        
                        .dino-chat-field {
                            width: 240px;
                        }
                        
                        .dino-quick-actions-sidebar {
                            width: 250px;
                            left: 10px !important;
                        }
                        
                        .dino-style-options {
                            grid-template-columns: 1fr;
                        }
                    }
                `;
                document.head.appendChild(styles);
            }
            
            closeOverlay() {
                // Remove white border highlight
                if (this.activeImageElement) {
                    this.activeImageElement.style.border = '3px solid #667eea';
                    this.activeImageElement.style.boxShadow = '';
                    this.activeImageElement.style.borderRadius = '8px';
                }
                
                // Remove all overlay elements
                if (this.buttonGroup) {
                    this.buttonGroup.remove();
                    this.buttonGroup = null;
                }
                if (this.chatInput) {
                    this.chatInput.remove();
                    this.chatInput = null;
                }
                if (this.quickActionsSidebar) {
                    this.quickActionsSidebar.remove();
                    this.quickActionsSidebar = null;
                }
                if (this.closeButton) {
                    this.closeButton.remove();
                    this.closeButton = null;
                }
                
                this.activeImageElement = null;
                this.currentMode = null;
                log('üîí DinoOverlay closed');
            }
            
            setMode(mode) {
                this.currentMode = mode;
                log(`üîß DinoOverlay mode set to: ${mode}`);
                
                // Update button states
                const buttons = document.querySelectorAll('.dino-main-btn');
                buttons.forEach(btn => btn.classList.remove('active'));
                
                const activeBtn = document.querySelector(`.dino-${mode}-btn`);
                if (activeBtn) {
                    activeBtn.classList.add('active');
                }
                
                // Show/hide quick actions sidebar based on mode
                if (mode === 'style' && this.quickActionsSidebar) {
                    this.quickActionsSidebar.style.display = 'block';
                } else if (this.quickActionsSidebar) {
                    this.quickActionsSidebar.style.display = 'none';
                }
            }
            
            closeQuickActions() {
                if (this.quickActionsSidebar) {
                    this.quickActionsSidebar.style.display = 'none';
                }
                
                // Remove active state from style button
                const styleBtn = document.querySelector('.dino-style-btn');
                if (styleBtn) {
                    styleBtn.classList.remove('active');
                }
                
                this.currentMode = null;
            }
            
            sendChatMessage() {
                const chatField = document.getElementById('dino-chat-field');
                const message = chatField.value.trim();
                
                if (!message) return;
                
                log(`üí¨ Chat message: "${message}"`);
                
                // Process the chat message
                this.processChatMessage(message);
                
                // Clear the input
                chatField.value = '';
            }
            
            async processChatMessage(message) {
                log(`ü§ñ Processing chat message: "${message}"`);
                
                // Show processing status
                this.showProcessingStatus('Analyzing your request...');
                
                try {
                    const response = await fetch(`${CONFIG.apiBaseUrl}/chat`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            message: message,
                            imageUrl: this.getCurrentImageUrl(),
                            userId: 'realestate-chat-user'
                        })
                    });
                    
                    if (response.ok) {
                        const result = await response.json();
                        log('‚úÖ Chat response received', 'success');
                        
                        // In a real implementation, this would show the AI response
                        alert(`ü§ñ AI Response:\n\n"${result.response || 'I can help you enhance this real estate image. Try asking about specific improvements like lighting, furniture, or styling.'}"`);
                    } else {
                        throw new Error(`Chat API error: ${response.status}`);
                    }
                } catch (error) {
                    log(`‚ùå Chat failed: ${error.message}`, 'error');
                    alert(`Chat failed: ${error.message}`);
                } finally {
                    this.hideProcessingStatus();
                }
            }
            
            applyStyle(styleName) {
                const stylePrompts = {
                    scandi: 'Transform this room into a Scandinavian style with light woods, white walls, and minimalist furniture',
                    minimalist: 'Create a minimalist design with clean lines, neutral colors, and uncluttered space',
                    sofa: 'Add a modern, comfortable sofa that fits the room\'s style and color scheme',
                    modern: 'Apply modern interior design with contemporary furniture and sleek finishes',
                    cozy: 'Make this space cozy with warm lighting, soft textures, and comfortable seating',
                    luxury: 'Transform into a luxury space with high-end furniture, rich materials, and elegant details'
                };
                
                const prompt = stylePrompts[styleName] || `Apply ${styleName} style to this room`;
                log(`üé® Applying style: ${styleName}`);
                
                this.processEdit(prompt);
            }
            
            showProcessingStatus(message) {
                // Remove existing status if any
                this.hideProcessingStatus();
                
                const status = document.createElement('div');
                status.className = 'dino-processing-status';
                status.id = 'dino-processing-status';
                status.innerHTML = `
                    <div class="dino-spinner"></div>
                    <span>${message}</span>
                `;
                
                document.body.appendChild(status);
                this.processingStatus = status;
            }
            
            hideProcessingStatus() {
                if (this.processingStatus) {
                    this.processingStatus.remove();
                    this.processingStatus = null;
                }
            }
            
            // Legacy methods for compatibility (not used in new overlay design)
            async applyEdit(editType) {
                const prompts = {
                    brighten: 'Make this real estate image brighter, more vibrant, and professionally appealing for property listings',
                    enhance: 'Enhance the overall quality, lighting, and visual appeal of this real estate photo to attract potential buyers',
                    staging: 'Add virtual staging with modern, attractive furniture and decor to make this space look move-in ready',
                    declutter: 'Remove clutter, personal items, and distractions to create a clean, spacious, and appealing real estate photo'
                };
                
                await this.processEdit(prompts[editType] || editType);
            }
            
            async applyCustomEdit() {
                const prompt = document.getElementById('dino-custom-prompt').value.trim();
                if (!prompt) {
                    alert('Please describe the changes you\'d like to make to this real estate image');
                    return;
                }
                
                await this.processEdit(prompt);
            }
            
            async processEdit(prompt) {
                if (this.isProcessing) return;
                
                this.isProcessing = true;
                this.showProcessingStatus('Processing your real estate image edit...');
                
                log(`üîÑ Processing real estate edit: "${prompt}"`);
                
                try {
                    const response = await fetch(`${CONFIG.apiBaseUrl}/edit-image`, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            imageUrl: this.getCurrentImageUrl(),
                            prompt: prompt,
                            userId: 'realestate-test-user',
                            mode: this.currentMode || 'edit'
                        })
                    });
                    
                    if (response.ok) {
                        const result = await response.json();
                        log('‚úÖ Real estate image edit completed successfully', 'success');
                        
                        // In a real implementation, this would update the image
                        alert(`üéâ ${this.currentMode || 'Edit'} completed successfully!\n\nPrompt: "${prompt}"\n\nIn a production environment, the edited image would replace the original and be available for download or direct use in your real estate listings.`);
                    } else {
                        throw new Error(`API error: ${response.status}`);
                    }
                } catch (error) {
                    log(`‚ùå Edit failed: ${error.message}`, 'error');
                    alert(`Edit failed: ${error.message}\n\nPlease check your internet connection and try again.`);
                } finally {
                    this.isProcessing = false;
                    this.hideProcessingStatus();
                }
            }
            
            getCurrentImageUrl() {
                const img = this.activeOverlay?.querySelector('.dino-image-preview img');
                return img ? img.src : '';
            }
        }
        
        // Initialize DinoOverlay for modals
        function initializeModalOverlay(modalId) {
            if (!overlayManager) {
                overlayManager = new DinoOverlayManager();
                window.dinoOverlay = overlayManager;
            }
            
            overlayManager.initializeForModal(modalId);
        }
        
        // Close modal when clicking outside
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('property-modal')) {
                const modalId = e.target.id.replace('-modal', '');
                closePropertyModal(modalId);
            }
        });
        
        // Initialize system
        document.addEventListener('DOMContentLoaded', function() {
            log('üöÄ Real Estate DinoOverlay system initialized');
            log('üìã Click property cards to view details');
            log('üé® DinoOverlay activates on large images only');
        });
    </script>
</body>
</html>